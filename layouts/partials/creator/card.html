{{- $creator := . -}}
<li class="card md:card-side bg-base-100 hover:shadow-lg transition-shadow duration-300">
    {{ with .Params.avatar }}
    {{/* Try multiple paths to find the avatar image */}}
    {{ $image := resources.Get . }}
    
    {{/* If not found, check if it's a CMS upload path */}}
    {{ if not $image }}
        {{ if hasPrefix . "/images/uploads/" }}
            {{ $assetPath := replace . "/images/uploads/" "uploads/" }}
            {{ $image = resources.Get $assetPath }}
        {{ end }}
    {{ end }}
    
    {{/* If still not found, try without leading slash */}}
    {{ if not $image }}
        {{ if hasPrefix . "/" }}
            {{ $noLeadingSlash := strings.TrimPrefix "/" . }}
            {{ $image = resources.Get $noLeadingSlash }}
        {{ end }}
    {{ end }}
    
    {{ if $image }}
    {{ $resized := $image.Fill "500x300 Center" }}
    <figure class="relative overflow-hidden">
        <img src="{{ $resized.RelPermalink }}" alt="{{ $creator.Title }}" width="500" height="300" class="object-cover h-full" />
    </figure>
    {{ else }}
    <figure class="bg-base-200 flex items-center justify-center" style="min-width: 200px; min-height: 200px;">
        {{ partial "helper/icon" "user" }}
    </figure>
    {{ end }}
    {{ else }}
    <figure class="bg-base-200 flex items-center justify-center" style="min-width: 200px; min-height: 200px;">
        {{ partial "helper/icon" "user" }}
    </figure>
    {{ end }}
    
    <div class="card-body">
        <h2 class="card-title">
            <a href="{{ .RelPermalink }}" class="link hover:text-primary">{{ .Title }}</a>
        </h2>
        
        {{ with .Params.bio }}
        <p class="text-base-content/80">{{ . | truncate 120 }}</p>
        {{ end }}
        
        {{/* Display skills section */}}
        <div class="mt-2 space-y-2">
            {{/* Common Skills */}}
            {{ with .Params.common_skills }}
            <div class="flex flex-wrap gap-1">
                {{ range first 4 . }}
                <span class="badge badge-sm">{{ . }}</span>
                {{ end }}
                {{ if gt (len .) 4 }}
                <span class="badge badge-sm badge-outline">+{{ sub (len .) 4 }} more</span>
                {{ end }}
            </div>
            {{ end }}
            
        </div>
        
        <div class="card-actions justify-between items-center mt-auto pt-2 border-t border-base-200">
            <div class="flex flex-wrap gap-3 items-center text-sm">
                {{/* Get count of posts by this creator */}}
                {{ $authorPosts := (where $.Site.RegularPages "Params.author" .File.ContentBaseName) }}
                {{ $postCount := len $authorPosts }}
                <div class="flex gap-1 items-center">
                    {{ partial "helper/icon" "writing" }}
                    <span>{{ $postCount }} {{ cond (eq $postCount 1) "post" "posts" }}</span>
                </div>
                
                {{/* Project count */}}
                {{ with .Params.projects }}
                <div class="flex gap-1 items-center">
                    {{ partial "helper/icon" "package" }}
                    <span>{{ len . }} {{ cond (eq (len .) 1) "project" "projects" }}</span>
                </div>
                {{ end }}
                
                {{/* Open for collaboration indicator */}}
                {{ with .Params.open_for }}
                <div class="flex gap-1 items-center text-success">
                    {{ partial "helper/icon" "check-circle" }}
                    <span>Open for collaboration</span>
                </div>
                {{ end }}
            </div>
        </div>
    </div>
</li>
